!function(){var e=document.getElementById("main-menu"),t=e.parentElement,n=document.getElementById("menu-open"),s=document.getElementById("mask"),o=document.documentElement.classList,r="aria-expanded",a="dopen";if(e&&n&&s){for(var i=0,c=e.getElementsByTagName("a"),d=e.querySelectorAll(".menu-item-has-children > a");i<c.length;++i)c[i].addEventListener("focus",v),c[i].addEventListener("blur",v);for(i=0;i<d.length;++i){var u=document.createElement("span");u.className="menutog",u.addEventListener("click",function(){this.parentElement.classList.toggle("focus")}),d[i].parentElement.insertBefore(u,d[i].nextSibling)}if("ontouchstart"in window){var l=function(e){var t=this.parentNode;if(document.addEventListener("click",m),t.classList.contains("focus"))t.classList.remove("focus");else{e.preventDefault();for(var n=0;n<t.parentNode.children.length;++n)t!==t.parentNode.children[n]&&t.parentNode.children[n].classList.remove("focus");t.classList.add("focus")}},m=function(t){if(!t||!e.contains(t.target)){for(var n=0;n<d.length;++n)d[n].parentNode.classList.remove("focus");document.removeEventListener("click",m)}},f=function(){var e=0;if(document.body.classList.contains("dnav"))for(;e<d.length;++e)d[e].addEventListener("touchstart",l);else for(;e<d.length;++e)d[e].removeEventListener("touchstart",l)};window.addEventListener("resize",f),f()}n.onclick=L,s.onclick=L}function v(e){for(var t=this;!t.classList.contains("menu");)"LI"==t.tagName&&("blur"==e.type?t.classList.remove("focus"):t.classList.add("focus")),t=t.parentElement}function L(){o.contains(a)?(o.remove(a),n.removeAttribute(r),t.removeAttribute(r),document.removeEventListener("keyup",E)):(o.add(a),n.setAttribute(r,"true"),t.setAttribute(r,"true"),document.addEventListener("keyup",E))}function E(e){27==e.keyCode&&L()}}();